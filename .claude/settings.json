{
  "includeCoAuthoredBy": false,
  "permissions": {
    "allow": [
      "mcp__docker__browser_navigate",
      "mcp__docker__browser_snapshot",
      "mcp__docker__browser_wait_for",
      "mcp__docker__browser_click",
      "Bash(pwd:*)",
      "Bash(whoami:*)",
      "Bash(uname:*)",
      "Bash(date:*)",
      "Bash(env:*)",
      "Bash(printenv:*)",
      "Bash(type:*)",
      "Bash(which:*)",
      "Bash(whereis:*)",
      "Bash(history:*)",
      "Bash(clear:*)",
      "Bash(ls:*)",
      "Bash(ll:*)",
      "Bash(la:*)",
      "Bash(tree:*)",
      "Bash(find:*)",
      "Bash(stat:*)",
      "Bash(file:*)",
      "Bash(head:*)",
      "Bash(tail:*)",
      "Bash(less:*)",
      "Bash(more:*)",
      "Bash(grep:*)",
      "Bash(egrep:*)",
      "Bash(fgrep:*)",
      "Bash(awk:*)",
      "Bash(sed:*)",
      "Bash(wc:*)",
      "Bash(jq:*)",
      "Bash(yq:*)",
      "Bash(cat:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(git status:*)",
      "Bash(git log:*)",
      "Bash(git show:*)",
      "Bash(git diff:*)",
      "Bash(git fetch:*)",
      "Bash(git remote:*)",
      "Bash(git tag:*)",
      "Bash(git config:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(terraform version:*)",
      "Bash(terraform fmt:*)",
      "Bash(terraform init:*)",
      "Bash(terraform validate:*)",
      "Bash(terraform plan:*)",
      "Bash(terraform providers:*)",
      "Bash(terraform graph:*)",
      "Bash(terraform show:*)",
      "Bash(terraform state:*)",
      "Bash(terraform output:*)",
      "Bash(terraform console:*)",
      "Bash(terragrunt --version:*)",
      "Bash(docker ps:*)",
      "Bash(docker images:*)",
      "Bash(docker inspect:*)",
      "Bash(docker-compose ps:*)",
      "Bash(kubectl get:*)",
      "Bash(kubectl describe:*)",
      "Bash(kubectl logs:*)",
      "Bash(helm list:*)",
      "Bash(helm status:*)",
      "Bash(aws sts get-caller-identity:*)",
      "Bash(gcloud auth list:*)",
      "Bash(az account show:*)",
      "Bash(ps:*)",
      "Bash(top:*)",
      "Bash(htop:*)",
      "Bash(df:*)",
      "Bash(du:*)",
      "Bash(ss:*)",
      "Bash(netstat:*)",
      "Bash(lsof:*)",
      "Bash(curl --version:*)",
      "Bash(wget --version:*)",
      "Bash(pwd:*)",
      "Bash(nx lint:*)",
      "Bash(nx test:*)",
      "Bash(nx build:*)",
      "Bash(nx serve:*)",
      "Bash(nx format:*)",
      "Bash(nx affected:*)",
      "Bash(nx run-many:*)",
      "Bash(nx graph:*)",
      "Bash(nx generate:*)",
      "Bash(nx reset:*)",
      "Bash(nx sync:*)",
      "Bash(claude mcp view:*)",
      "WebFetch(domain:*)",
      "/dev/null",
      "Bash(sleep:*)",
      "Bash(curl:*)",
      "Bash(wget:*)",
      "Bash(cd:*)",
      "Bash(npm run test:*)",
      "Bash(npm run lint)",
      "Bash(jest:*)",
      "Bash(vitest:*)",
      "Bash(node --test:*)",
      "Bash(pnpm run test:*)",
      "Bash(yarn test:*)",
      "WebFetch(domain:github.com)",
      "WebFetch(domain:gitlab.com)",
      "WebFetch(domain:bitbucket.org)",
      "WebFetch(domain:docs.anthropic.com)",
      "WebFetch(domain:registry.terraform.io)",
      "WebFetch(domain:hub.docker.com)",
      "WebFetch(domain:pypi.org)",
      "WebFetch(domain:npmjs.com)",
      "WebFetch(domain:rubygems.org)",
      "WebFetch(domain:crates.io)",
      "WebFetch(domain:golang.org)",
      "WebFetch(domain:aws.amazon.com)",
      "WebFetch(domain:cloud.google.com)",
      "WebFetch(domain:azure.microsoft.com)",
      "WebFetch(domain:stackoverflow.com)",
      "WebFetch(domain:developer.mozilla.org)",
      "Bash(terraform apply:*)",
      "Bash(terraform destroy:*)",
      "Bash(docker-compose up:*)",
      "Bash(docker-compose down:*)",
      "Bash(docker-compose build:*)",
      "Bash(docker volume:*)",
      "Bash(docker network:*)",
      "Bash(docker build:*)",
      "Bash(docker run:*)",
      "Bash(curl:*)",
      "Bash(wget:*)"
    ],
    "deny": [
      "Bash(rm -rf /:*)",
      "Bash(rm -rf /*:*)",
      "Bash(rm -rf ~/*:*)",
      "Bash(rm -rf .:*::*)",
      "Bash(dd:*)",
      "Bash(mkfs:*)",
      "Bash(fdisk:*)",
      "Bash(parted:*)",
      "Bash(reboot:*)",
      "Bash(shutdown:*)",
      "Bash(init:*)",
      "Bash(terraform apply:*)",
      "Bash(terraform destroy:*)",
      "Bash(git commit:*--no-verify:*::*)"
    ],
    "ask": [
      "Bash(./:*)",
      "Bash(sudo:*)",
      "Bash(rm:*)",
      "Bash(mv:*)",
      "Bash(cp:*)",
      "Bash(chmod:*)",
      "Bash(chown:*)",
      "Bash(ln:*)",
      "Bash(touch:*)",
      "Bash(mkdir:*)",
      "Bash(rmdir:*)",
      "Bash(kill:*)",
      "Bash(killall:*)",
      "Bash(pkill:*)",
      "Bash(git checkout:*)",
      "Bash(git switch:*)",
      "Bash(git merge:*)",
      "Bash(git rebase:*)",
      "Bash(git reset:*)",
      "Bash(git revert:*)",
      "Bash(git stash:*)",
      "Bash(git clone:*)",
      "Bash(git init:*)",
      "Bash(docker pull:*)",
      "Bash(docker push:*)",
      "Bash(docker tag:*)",
      "Bash(docker rmi:*)",
      "Bash(docker system prune:*)",
      "Bash(kubectl apply:*)",
      "Bash(kubectl delete:*)",
      "Bash(kubectl scale:*)",
      "Bash(kubectl rollout:*)",
      "Bash(helm upgrade:*)",
      "Bash(helm uninstall:*)",
      "Bash(helm repo add:*)",
      "Bash(helm repo update:*)",
      "Bash(aws:*)",
      "Bash(gcloud:*)",
      "Bash(az:*)",
      "Bash(doctl:*)",
      "Bash(ibmcloud:*)",
      "Bash(pip:*)",
      "Bash(pip3:*)",
      "Bash(brew:*)",
      "Bash(apt:*)",
      "Bash(apt-get:*)",
      "Bash(yum:*)",
      "Bash(dnf:*)",
      "Bash(gem:*)",
      "Bash(bundle:*)",
      "Bash(cargo:*)",
      "Bash(go install:*)",
      "Bash(terragrunt:*)",
      "Bash(terraform state:*)",
      "Bash(terraform import:*)",
      "Bash(terraform taint:*)",
      "Bash(terraform untaint:*)",
      "Bash(terraform force-unlock:*)",
      "Bash(terraform workspace:*)",
      "Bash(terraform login:*)",
      "Bash(terraform logout:*)",
      "Bash(nx migrate:*)",
      "Bash(nx workspace-schematic:*)"
    ]
  },
  "hooks": {
    "PostToolUse": [
      {
        "matcher": "mcp__playwright__browser_snapshot|mcp__chrome-devtools__take_snapshot",
        "hooks": [
          {
            "type": "command",
            "command": "sh -c 'node \"$HOME/.claude/hooks/qa-screenshot-validator.js\"'"
          }
        ]
      },
      {
        "matcher": "Skill",
        "hooks": [
          {
            "type": "command",
            "command": "sh -c 'CLAUDE_HOOK_TYPE=PostToolUse node \"$HOME/.claude/hooks/work-enforce-steps.js\"'"
          }
        ]
      },
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "sh -c 'node \"$HOME/.claude/hooks/track-agent-processes.js\"'"
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "Skill",
        "hooks": [
          {
            "type": "command",
            "command": "sh -c 'CLAUDE_HOOK_TYPE=PreToolUse node \"$HOME/.claude/hooks/work-enforce-steps.js\"'"
          }
        ]
      },
      {
        "matcher": "Read|Glob|Grep",
        "hooks": [
          {
            "type": "command",
            "command": "sh -c 'node \"$HOME/.claude/hooks/detect-agent-loop.js\"'"
          }
        ]
      },
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "sh -c 'node \"$HOME/.claude/hooks/enforce-agent-usage.js\"'"
          },
          {
            "type": "command",
            "command": "sh -c 'node \"$HOME/.claude/hooks/pr-escaping-validator.js\"'"
          },
          {
            "type": "command",
            "command": "sh -c 'node \"$HOME/.claude/hooks/block-duplicate-quality-checks.js\"'"
          },
          {
            "type": "command",
            "command": "sh -c 'node \"$HOME/.claude/hooks/protect-task-folders.js\"'"
          },
          {
            "type": "command",
            "command": "sh -c 'node \"$HOME/.claude/hooks/protect-claude-config.js\"'"
          },
          {
            "type": "command",
            "command": "sh -c 'node \"$HOME/.claude/hooks/protect-claude-git.js\"'"
          }
        ]
      },
      {
        "matcher": "mcp__atlassian__jira_create_issue",
        "hooks": [
          {
            "type": "command",
            "command": "sh -c 'node \"$HOME/.claude/hooks/enforce-agent-usage.js\"'"
          }
        ]
      },
      {
        "matcher": "Skill",
        "hooks": [
          {
            "type": "command",
            "command": "sh -c 'node \"$HOME/.claude/hooks/enforce-agent-usage.js\"'"
          }
        ]
      },
      {
        "matcher": "Task",
        "hooks": [
          {
            "type": "command",
            "command": "sh -c 'node \"$HOME/.claude/hooks/enforce-agent-usage.js\"'"
          }
        ]
      },
      {
        "matcher": "Edit|Write|MultiEdit",
        "hooks": [
          {
            "type": "command",
            "command": "sh -c 'node \"$HOME/.claude/hooks/protect-report-files.js\"'"
          },
          {
            "type": "command",
            "command": "sh -c 'node \"$HOME/.claude/hooks/protect-claude-config.js\"'"
          },
          {
            "type": "command",
            "command": "sh -c 'node \"$HOME/.claude/hooks/work-implement-enforce.js\"'"
          },
          {
            "type": "command",
            "command": "sh -c 'node \"$HOME/.claude/hooks/work-require-implement.js\"'"
          }
        ]
      },
      {
        "matcher": "mcp__playwright__browser_take_screenshot|mcp__playwright_headed__browser_take_screenshot",
        "hooks": [
          {
            "type": "command",
            "command": "sh -c 'node \"$HOME/.claude/hooks/screenshot-naming.js\"'"
          }
        ]
      }
    ],
    "SubagentStop": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "node /home/node/.claude/hooks/validate-qa-report.js"
          },
          {
            "type": "command",
            "command": "node /home/node/.claude/hooks/pr-generator-validator.js"
          },
          {
            "type": "command",
            "command": "node /home/node/.claude/hooks/pr-post-generator-validator.js"
          }
        ]
      }
    ],
    "Stop": [
      {
        "matcher": ".*commit.*|.*git commit.*|.*semantic-commit.*|.*commit-writer.*",
        "hooks": [
          {
            "type": "command",
            "command": "node /home/node/.claude/hooks/block-claude-attribution.js"
          }
        ]
      },
      {
        "matcher": ".*pull request.*|.*PR.*|.*pr-generator.*|.*gh pr.*",
        "hooks": [
          {
            "type": "command",
            "command": "node /home/node/.claude/hooks/block-claude-attribution.js"
          },
          {
            "type": "command",
            "command": "node /home/node/.claude/hooks/block-pr-and-jira-violations.js"
          }
        ]
      },
      {
        "matcher": ".*jira.*create.*|.*create.*ticket.*|.*mcp__atlassian.*",
        "hooks": [
          {
            "type": "command",
            "command": "node /home/node/.claude/hooks/block-pr-and-jira-violations.js"
          }
        ]
      },
      {
        "matcher": ".*\\b(implement|create|build|develop|code|write|fix|refactor|update|enhance|modify)\\b.*",
        "hooks": [
          {
            "type": "command",
            "command": "sh -c 'node \"$HOME/.claude/hooks/auto-code-check.js\"'"
          },
          {
            "type": "command",
            "command": "sh -c 'node \"$HOME/.claude/hooks/block-claude-attribution.js\"'"
          },
          {
            "type": "command",
            "command": "sh -c 'node \"$HOME/.claude/hooks/block-pr-and-jira-violations.js\"'"
          },
          {
            "type": "command",
            "command": "sh -c 'node \"$HOME/.claude/hooks/pr-review-validator.js\"'"
          }
        ]
      },
      {
        "matcher": ".*\\b(jira|ticket|issue|atlassian|confluence|APPSUPEN|sprint|epic|backlog)\\b.*",
        "hooks": [
          {
            "type": "command",
            "command": "sh -c 'node \"$HOME/.claude/hooks/enforce-mcp-atlassian.js\"'"
          }
        ]
      },
      {
        "matcher": ".*(/check|code.?review|quality.?check|APPROVED|PASS|tests?.?md|code-review.?md|qa.?md).*",
        "hooks": [
          {
            "type": "command",
            "command": "sh -c 'node \"$HOME/.claude/hooks/work-code-review-status.js\"'"
          },
          {
            "type": "command",
            "command": "sh -c 'node \"$HOME/.claude/hooks/work-suggestion-replies.js\"'"
          }
        ]
      }
    ],
    "UserPromptSubmit": [
      {
        "matcher": ".*pull request.*|.*PR.*|.*pr.*",
        "hooks": [
          {
            "type": "command",
            "command": "echo 'REMINDER: Use the pr-generator agent when creating pull requests'"
          }
        ]
      },
      {
        "matcher": ".*commit.*|.*git commit.*",
        "hooks": [
          {
            "type": "command",
            "command": "echo 'REMINDER: Use the commit-writer agent for creating semantic commit messages'"
          }
        ]
      },
      {
        "matcher": ".*\\b(jira|ticket|issue|story|epic|sprint|task|bug|backlog|board|project key|APPSUPEN)\\b.*|.*create.*issue.*|.*update.*issue.*|.*search.*jira.*|.*jira.*search.*|.*atlassian.*",
        "hooks": [
          {
            "type": "command",
            "command": "echo 'REMINDER: For Jira operations:' && echo '  - Creating tickets: Use jira-task-creator agent (NOT mcp__atlassian__jira_create_issue directly)' && echo '  - Other ops (update/search/comment): Use MCP tools (mcp__atlassian__jira_*)' && echo '  - Default project: APPSUPEN'"
          }
        ]
      },
      {
        "matcher": ".*entire.*design.*|.*design.*system.*|.*comprehensive.*UI.*|.*multi-page.*|.*application.*redesign.*|.*complete.*overhaul.*|.*holistic.*design.*|.*brand.*identity.*|.*enterprise.*UI.*|.*design.*architecture.*|.*visual.*language.*|.*component.*library.*",
        "hooks": [
          {
            "type": "command",
            "command": "echo 'REMINDER: Use the react-ui-senior agent (Opus) for comprehensive design systems and large-scale UI projects'"
          }
        ]
      },
      {
        "matcher": ".*beautiful.*|.*design.*|.*animation.*|.*styling.*|.*CSS.*|.*SCSS.*|.*Sass.*|.*responsive.*|.*layout.*|.*theme.*|.*color.*|.*visual.*|.*UI.*component.*|.*user experience.*|.*UX.*|.*interface.*|.*pixel.*perfect.*|.*Tailwind.*|.*styled-components.*|.*Framer.*Motion.*",
        "hooks": [
          {
            "type": "command",
            "command": "echo 'REMINDER: Use the react-ui agent (Sonnet) for beautiful UI designs and animations'"
          }
        ]
      },
      {
        "matcher": ".*state management.*|.*Redux.*|.*Zustand.*|.*React Query.*|.*business logic.*|.*architecture.*|.*performance.*optimization.*|.*TypeScript.*|.*unit.*test.*|.*integration.*test.*|.*API.*integration.*|.*data.*flow.*|.*form.*logic.*|.*validation.*|.*authentication.*|.*WebSocket.*|.*real-time.*|.*complex.*logic.*|.*scalable.*|.*enterprise.*",
        "hooks": [
          {
            "type": "command",
            "command": "echo 'REMINDER: Use the react-developer agent for complex React architecture and logic'"
          }
        ]
      },
      {
        "matcher": ".*node.*|.*express.*|.*nest.*|.*next.*|.*backend.*|.*API.*|.*endpoint.*",
        "hooks": [
          {
            "type": "command",
            "command": "echo 'REMINDER: Use the nodejs-tdd-developer agent for Node.js backend development'"
          }
        ]
      },
      {
        "matcher": ".*deploy.*|.*deployment.*|.*cloud.*|.*AWS.*|.*Azure.*|.*GCP.*|.*infrastructure.*|.*terraform.*|.*tf.*|.*docker.*|.*kubernetes.*|.*k8s.*|.*CI/CD.*|.*pipeline.*|.*server.*|.*configuration.*|.*monitoring.*|.*logging.*|.*infrastructure as code.*|.*IaC.*|.*containerization.*|.*orchestration.*",
        "hooks": [
          {
            "type": "command",
            "command": "echo 'REMINDER: Use the devops-expert agent for infrastructure and deployment tasks'"
          }
        ]
      },
      {
        "matcher": ".*MCP.*not.*available.*|.*MCP.*error.*|.*github.*token.*|.*gh.*not.*working.*",
        "hooks": [
          {
            "type": "command",
            "command": "echo 'GitHub Token Fallback Steps:' && echo '1. Find gh config location:' && echo '   Run: find ~ -name hosts.yml 2>/dev/null | grep -E \"gh|github\"' && echo '2. Check gh auth status and token:' && echo '   Run: gh auth status --show-token 2>&1 | grep -E \"Token:|Config file:\"' && echo '3. Read token from config:' && echo '   Run: cat $(find ~ -name hosts.yml 2>/dev/null | grep -E \"gh|github\" | head -1) | grep oauth_token' && echo '4. Update token in .claude.json:' && echo '   Path: .claude.json > mcpServers > github > env > GITHUB_PERSONAL_ACCESS_TOKEN' && echo '5. Use gh api commands as fallback when MCP fails (VPN may block MCP)' && echo '   Example: gh api repos/owner/repo/pulls -X POST ...'"
          }
        ]
      },
      {
        "matcher": ".*\\b(check|review|analyze|audit|inspect|validate|verify|examine|assess|evaluate|scan|lint|test)\\b.*(code|files|quality|implementation|syntax|style|bugs|issues|errors|performance|security|standards|best practices).*|.*code.*(check|review|analyze|audit|inspect|validate|verify|examine|assess|evaluate|scan|quality|lint).*|.*quality.*(check|review|analyze|audit|inspect|validate|verify|examine|assess|evaluate|scan).*",
        "hooks": [
          {
            "type": "command",
            "command": "sh -c 'node \"$HOME/.claude/hooks/auto-code-check.js\"'"
          }
        ]
      },
      {
        "matcher": ".*\\b(create|make|new)\\b.*(branch|pr|pull request).*\\b(commit|push|workflow|flow).*|.*branch.*commit.*pr.*|.*stash.*commit.*pr.*|.*workflow.*pr.*|.*\\b(pr|pull request)\\b.*(staged|staged changes).*|.*staged.*(pr|pull request).*|.*commit.*staged.*(pr|push).*",
        "hooks": [
          {
            "type": "command",
            "command": "echo 'WORKFLOW: Branch → Commit → PR' && echo '1. git checkout -b <branch-name>' && echo '2. git stash push -u --keep-index -m \"WIP: description\"  # Stash unstaged, keep staged' && echo '3. Run pnpm i + git add the pnpm lock (if changed), then use semantic-commit-writer agent to commit staged changes' && echo '4. git fetch origin main && git rebase origin/main' && echo '5. git push -u origin <branch-name>' && echo '6. Use pr-generator agent (via gh pr create)' && echo '7. git stash pop  # Restore unstaged changes' && echo '' && echo 'CRITICAL: Use -u flag with stash to include untracked files (prevents pre-commit hook failures)'"
          }
        ]
      },
      {
        "matcher": ".*git\\s+push.*",
        "hooks": [
          {
            "type": "command",
            "command": "echo '' && echo 'After pushing, use pr-generator agent to create/update PR:' && echo '' && echo 'Task(pr-generator):' && echo '  Create/update PR for the current branch.' && echo '  Jira ticket: APPSUPEN-XXX' && echo ''"
          }
        ]
      }
    ]
  },
  "statusLine": {
    "type": "command",
    "command": "printf \"\\033[01;32m%s@%s\\033[00m:\\033[01;34m%s\\033[00m\" \"$(whoami)\" \"$(hostname -s)\" \"$(pwd)\""
  },
  "alwaysThinkingEnabled": true
}
